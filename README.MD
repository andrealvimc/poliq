# ğŸš€ Poliq - Automated News Processing Platform

**Poliq** Ã© uma plataforma automatizada de processamento de notÃ­cias que busca, processa com IA e gera conteÃºdo visual para redes sociais.

## âœ¨ Features

- ğŸ”„ **Fetch AutomÃ¡tico**: Busca notÃ­cias de fontes externas (GNews API)
- ğŸ¤– **Processamento IA**: Gera tÃ­tulos, resumos e comentÃ¡rios otimizados
- ğŸ¨ **GeraÃ§Ã£o de MÃ­dia**: Cria imagens para Instagram no padrÃ£o InfoMoney
- âš¡ **Processamento AssÃ­ncrono**: Sistema de filas com Bull Queue
- ğŸ“… **Agendamento**: Cron jobs para automaÃ§Ã£o completa
- ğŸ” **AutenticaÃ§Ã£o**: JWT com roles (Admin/Editor)
- ğŸ“Š **CategorizaÃ§Ã£o**: Foco em PolÃ­tica, Tecnologia e Economia

## ğŸ—ï¸ Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GNews API     â”‚â”€â”€â”€â–¶â”‚  News Fetcher   â”‚â”€â”€â”€â–¶â”‚   Database      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ Social Media    â”‚â—€â”€â”€â”€â”‚ Media Generator â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                â–²                     â”‚
                                â”‚                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Instagram     â”‚    â”‚   AI Processor  â”‚â—€â”€â”€â”€â”‚  Bull Queues    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  (Ollama/GPT)   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Tech Stack

- **Backend**: NestJS + TypeScript
- **Database**: PostgreSQL + Prisma ORM
- **Queue**: Bull Queue + Redis
- **AI**: Ollama (Local) / OpenAI (Cloud)
- **Image**: Node Canvas + Sharp
- **Auth**: JWT + Passport
- **API**: GNews, Meta Graph API

## ğŸš€ Quick Start

### Prerequisites

- Node.js 18+
- PostgreSQL
- Redis
- Ollama (para IA local)

### Installation

```bash
# Clone repository
git clone https://github.com/andrealvimc/poliq.git
cd poliq

# Install dependencies
pnpm install

# Setup environment
cp env.example .env
# Edit .env with your configurations

# Setup database
npx prisma migrate deploy
npx prisma db seed

# Start services
docker-compose up -d  # Redis + PostgreSQL
ollama serve          # AI Service
pnpm run start:dev    # Application
```

### Configuration

```env
# Database
DATABASE_URL="postgresql://poliq:poliq123@localhost:5432/poliq"

# APIs
GNEWS_API_KEY="your-gnews-api-key"
OPENAI_API_KEY="your-openai-api-key"  # Optional

# AI Provider (ollama or openai)
AI_PROVIDER="ollama"
OLLAMA_BASE_URL="http://localhost:11434"
OLLAMA_MODEL="llama3.2:1b"

# Redis
REDIS_HOST="localhost"
REDIS_PORT=6379
```

## ğŸ“– API Documentation

### Authentication
```http
POST /api/v1/auth/login
{
  "email": "admin@poliq.com.br",
  "password": "admin123"
}
```

### News Operations
```http
# Fetch and process news
POST /api/v1/providers/fetch-and-save
Authorization: Bearer <token>

# Get processed news
GET /api/v1/news?page=1&limit=10
Authorization: Bearer <token>

# Generate media
POST /api/v1/media/generate
Authorization: Bearer <token>
```

## ğŸ”„ Workflow

1. **News Fetching**: Sistema busca notÃ­cias da GNews API por categoria
2. **AI Processing**: Ollama processa e otimiza tÃ­tulos/resumos
3. **Media Generation**: Gera imagens no padrÃ£o InfoMoney (1080x1080)
4. **Queue Management**: Processa tudo de forma assÃ­ncrona
5. **Publication Ready**: ConteÃºdo pronto para redes sociais

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ ai/                 # AI processing services
â”œâ”€â”€ auth/               # Authentication & authorization
â”œâ”€â”€ common/             # Shared utilities
â”œâ”€â”€ config/             # Configuration files
â”œâ”€â”€ database/           # Database service
â”œâ”€â”€ media/              # Image generation
â”œâ”€â”€ news/               # News management
â”œâ”€â”€ providers/          # External API integrations
â”œâ”€â”€ publication/        # Social media publishing
â”œâ”€â”€ queue/              # Background job processing
â””â”€â”€ scheduler/          # Cron jobs
```

## ğŸ¤– AI Configuration

### Ollama (Local - Free)
```bash
# Install Ollama
brew install ollama

# Start service
brew services start ollama

# Pull model
ollama pull llama3.2:1b

# Configure in .env
AI_PROVIDER="ollama"
```

### OpenAI (Cloud - Paid)
```bash
# Configure in .env
AI_PROVIDER="openai"
OPENAI_API_KEY="sk-..."
OPENAI_MODEL="gpt-3.5-turbo"
```

## ğŸ¨ Media Templates

O sistema usa templates configurÃ¡veis para geraÃ§Ã£o de imagens:

- **InfoMoney Style**: 1080x1080px, banner branco, texto otimizado
- **Customizable**: Colors, fonts, layouts via JSON templates

## ğŸ“Š Monitoring

```http
# Queue statistics
GET /api/v1/queue/stats

# System health
GET /api/v1/health
```

## ğŸ”§ Development

```bash
# Development mode
pnpm run start:dev

# Build
pnpm run build

# Tests
pnpm run test

# Database operations
npx prisma studio
npx prisma migrate dev
```

## ğŸ“¦ Deployment

```bash
# Production build
pnpm run build

# Start production
pnpm run start:prod

# Docker deployment
docker-compose -f docker-compose.prod.yml up -d
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Open Pull Request

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ†˜ Support

- ğŸ“§ Email: support@poliq.com.br
- ğŸ’¬ Issues: [GitHub Issues](https://github.com/andrealvimc/poliq/issues)
- ğŸ“– Docs: [Documentation](https://docs.poliq.com.br)

---

**Made with â¤ï¸ by Poliq Team**