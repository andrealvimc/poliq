# ğŸš€ Poliq - Automated News Processing Platform

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![NestJS](https://img.shields.io/badge/NestJS-10+-red.svg)](https://nestjs.com/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-blue.svg)](https://www.typescriptlang.org/)
[![Prisma](https://img.shields.io/badge/Prisma-5.0+-2D3748.svg)](https://www.prisma.io/)

**Poliq** Ã© uma plataforma automatizada de processamento de notÃ­cias que busca, processa com IA e gera conteÃºdo visual para redes sociais. Transforme notÃ­cias em conteÃºdo viral com inteligÃªncia artificial!

## ğŸ¯ Por que usar o Poliq?

- âš¡ **AutomaÃ§Ã£o Completa**: De fetch atÃ© publicaÃ§Ã£o, tudo automatizado
- ğŸ§  **IA AvanÃ§ada**: Processamento inteligente com Ollama ou OpenAI
- ğŸ¨ **Design Profissional**: Templates prontos no padrÃ£o InfoMoney
- ğŸ“± **Multi-plataforma**: Gera conteÃºdo para Instagram, Twitter, LinkedIn
- ğŸ”§ **FÃ¡cil Deploy**: Deploy em minutos com Railway, Docker ou VPS
- ğŸ’° **Custo Zero**: Funciona 100% local com Ollama (opcional OpenAI)

## âœ¨ Features

- ğŸ”„ **Fetch AutomÃ¡tico**: Busca notÃ­cias de fontes externas (GNews API)
- ğŸ¤– **Processamento IA**: Gera tÃ­tulos, resumos e comentÃ¡rios otimizados
- ğŸ¨ **GeraÃ§Ã£o de MÃ­dia**: Cria imagens para Instagram no padrÃ£o InfoMoney
- âš¡ **Processamento AssÃ­ncrono**: Sistema de filas com Bull Queue
- ğŸ“… **Agendamento**: Cron jobs para automaÃ§Ã£o completa
- ğŸ” **AutenticaÃ§Ã£o**: JWT com roles (Admin/Editor)
- ğŸ“Š **CategorizaÃ§Ã£o**: Foco em PolÃ­tica, Tecnologia e Economia

## ğŸ—ï¸ Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GNews API     â”‚â”€â”€â”€â–¶â”‚  News Fetcher   â”‚â”€â”€â”€â–¶â”‚   Database      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚ Social Media    â”‚â—€â”€â”€â”€â”‚ Media Generator â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                                â–²                     â”‚
                                â”‚                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Instagram     â”‚    â”‚   AI Processor  â”‚â—€â”€â”€â”€â”‚  Bull Queues    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  (Ollama/GPT)   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Tech Stack

- **Backend**: NestJS + TypeScript
- **Database**: PostgreSQL + Prisma ORM
- **Queue**: Bull Queue + Redis
- **AI**: Ollama (Local) / OpenAI (Cloud)
- **Image**: Node Canvas + Sharp
- **Auth**: JWT + Passport
- **API**: GNews, Meta Graph API

## ğŸš€ Quick Start

### Prerequisites

- Node.js 18+
- PostgreSQL
- Redis
- Ollama (para IA local)

### Installation

```bash
# Clone repository
git clone https://github.com/andrealvimc/poliq.git
cd poliq

# Install dependencies
pnpm install

# Setup environment
cp env.example .env
# Edit .env with your configurations

# Setup database
npx prisma migrate deploy
npx prisma db seed

# Start services
docker-compose up -d  # Redis + PostgreSQL
ollama serve          # AI Service
pnpm run start:dev    # Application
```

### Configuration

```env
# Database
DATABASE_URL="postgresql://poliq:poliq123@localhost:5432/poliq"

# APIs
GNEWS_API_KEY="your-gnews-api-key"
OPENAI_API_KEY="your-openai-api-key"  # Optional

# AI Provider (ollama or openai)
AI_PROVIDER="ollama"
OLLAMA_BASE_URL="http://localhost:11434"
OLLAMA_MODEL="llama3.2:1b"

# Redis
REDIS_HOST="localhost"
REDIS_PORT=6379
```

## ğŸ“– API Documentation

### Authentication
```http
POST /api/v1/auth/login
{
  "email": "admin@poliq.com.br",
  "password": "admin123"
}
```

### News Operations
```http
# Fetch and process news
POST /api/v1/providers/fetch-and-save
Authorization: Bearer <token>

# Get processed news
GET /api/v1/news?page=1&limit=10
Authorization: Bearer <token>

# Generate media
POST /api/v1/media/generate
Authorization: Bearer <token>
```

## ğŸ”„ Workflow

1. **News Fetching**: Sistema busca notÃ­cias da GNews API por categoria
2. **AI Processing**: Ollama processa e otimiza tÃ­tulos/resumos
3. **Media Generation**: Gera imagens no padrÃ£o InfoMoney (1080x1080)
4. **Queue Management**: Processa tudo de forma assÃ­ncrona
5. **Publication Ready**: ConteÃºdo pronto para redes sociais

## ğŸ“ Project Structure

```
src/
â”œâ”€â”€ ai/                 # AI processing services
â”œâ”€â”€ auth/               # Authentication & authorization
â”œâ”€â”€ common/             # Shared utilities
â”œâ”€â”€ config/             # Configuration files
â”œâ”€â”€ database/           # Database service
â”œâ”€â”€ media/              # Image generation
â”œâ”€â”€ news/               # News management
â”œâ”€â”€ providers/          # External API integrations
â”œâ”€â”€ publication/        # Social media publishing
â”œâ”€â”€ queue/              # Background job processing
â””â”€â”€ scheduler/          # Cron jobs
```

## ğŸ¤– AI Configuration

### Ollama (Local - Free)
```bash
# Install Ollama
brew install ollama

# Start service
brew services start ollama

# Pull model
ollama pull llama3.2:1b

# Configure in .env
AI_PROVIDER="ollama"
```

### OpenAI (Cloud - Paid)
```bash
# Configure in .env
AI_PROVIDER="openai"
OPENAI_API_KEY="sk-..."
OPENAI_MODEL="gpt-3.5-turbo"
```

## ğŸ¨ Media Templates

O sistema usa templates configurÃ¡veis para geraÃ§Ã£o de imagens:

- **InfoMoney Style**: 1080x1080px, banner branco, texto otimizado
- **Customizable**: Colors, fonts, layouts via JSON templates

## ğŸ“Š Monitoring

```http
# Queue statistics
GET /api/v1/queue/stats

# System health
GET /api/v1/health
```

## ğŸ”§ Development

```bash
# Development mode
pnpm run start:dev

# Build
pnpm run build

# Tests
pnpm run test

# Database operations
npx prisma studio
npx prisma migrate dev
```

## ğŸš€ Quick Demo

```bash
# 1. Clone e instale
git clone https://github.com/andrealvimc/poliq.git
cd poliq && pnpm install

# 2. Configure (copie o .env.example)
cp env.example .env

# 3. Inicie os serviÃ§os
docker-compose up -d  # PostgreSQL + Redis
ollama serve          # IA local (opcional)

# 4. Configure o banco
npx prisma migrate deploy
npx prisma db seed

# 5. Inicie a aplicaÃ§Ã£o
pnpm run start:dev

# 6. Acesse: http://localhost:3000
# Login: admin@poliq.com.br / admin123
```

## ğŸ¨ Screenshots

### Dashboard Administrativo
![Dashboard Admin](media/admin-home.png)
*Interface administrativa para gerenciar notÃ­cias, filas e configuraÃ§Ãµes*

### PÃ¡gina Principal
![Home Page](media/home.png)
*PÃ¡gina inicial com notÃ­cias processadas e categorizadas*

### VisualizaÃ§Ã£o de NotÃ­cia
![NotÃ­cia](media/noticia.png)
*PÃ¡gina de detalhes da notÃ­cia com conteÃºdo gerado por IA*

## ğŸ“¦ Deployment

### ğŸš€ Deploy RÃ¡pido (Railway)

1. **Fork do repositÃ³rio** e conecte ao Railway
2. **Configure as variÃ¡veis de ambiente**:
   ```env
   DATABASE_URL=postgresql://...
   GNEWS_API_KEY=your-key
   AI_PROVIDER=openai
   OPENAI_API_KEY=sk-...
   REDIS_URL=redis://...
   JWT_SECRET=your-secret
   ```
3. **Deploy automÃ¡tico** - Railway detecta o `package.json` e faz deploy

### ğŸ³ Deploy com Docker

```bash
# Clone e configure
git clone https://github.com/andrealvimc/poliq.git
cd poliq

# Configure environment
cp env.example .env
# Edite o .env com suas configuraÃ§Ãµes

# Deploy com Docker Compose
docker-compose up -d

# Ou build customizado
docker build -t poliq-api .
docker run -p 3000:3000 --env-file .env poliq-api
```

### â˜ï¸ Deploy Manual (VPS/Cloud)

```bash
# 1. Instalar dependÃªncias do sistema
sudo apt update
sudo apt install nodejs npm postgresql redis-server

# 2. Configurar banco de dados
sudo -u postgres createdb poliq
sudo -u postgres createuser poliq_user

# 3. Deploy da aplicaÃ§Ã£o
git clone https://github.com/andrealvimc/poliq.git
cd poliq
npm install
npx prisma migrate deploy
npx prisma db seed

# 4. Iniciar serviÃ§os
pm2 start npm --name "poliq-api" -- run start:prod
```

### ğŸ”§ ConfiguraÃ§Ã£o de ProduÃ§Ã£o

#### VariÃ¡veis de Ambiente ObrigatÃ³rias
```env
# Database
DATABASE_URL="postgresql://user:pass@host:5432/poliq"

# APIs Externas
GNEWS_API_KEY="your-gnews-key"
OPENAI_API_KEY="sk-your-openai-key"  # ou configure Ollama

# Redis
REDIS_URL="redis://localhost:6379"

# JWT
JWT_SECRET="your-super-secret-jwt-key"

# AI Provider
AI_PROVIDER="openai"  # ou "ollama"
```

#### ConfiguraÃ§Ã£o de DomÃ­nio
```bash
# Nginx reverse proxy
server {
    listen 80;
    server_name api.poliq.com.br;
    
    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### ğŸ“Š Monitoramento

```bash
# Health check
curl https://api.poliq.com.br/api/v1/health

# Queue status
curl https://api.poliq.com.br/api/v1/queue/stats

# Logs (com PM2)
pm2 logs poliq-api
pm2 monit
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Open Pull Request

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ—ºï¸ Roadmap

### âœ… VersÃ£o Atual (v1.0)
- [x] Fetch automÃ¡tico de notÃ­cias
- [x] Processamento com IA (Ollama/OpenAI)
- [x] GeraÃ§Ã£o de imagens para Instagram
- [x] Sistema de filas assÃ­ncronas
- [x] Dashboard administrativo
- [x] AutenticaÃ§Ã£o JWT

### ğŸš§ PrÃ³ximas VersÃµes
- [ ] **v1.1**: Suporte a Twitter e LinkedIn
- [ ] **v1.2**: Templates customizÃ¡veis
- [ ] **v1.3**: API de webhooks
- [ ] **v1.4**: Analytics e mÃ©tricas
- [ ] **v1.5**: IntegraÃ§Ã£o com Meta Business
- [ ] **v2.0**: Multi-tenant e white-label

## ğŸ†˜ Support

- ğŸ“§ **Email**: support@poliq.com.br
- ğŸ’¬ **Issues**: [GitHub Issues](https://github.com/andrealvimc/poliq/issues)
- ğŸ“– **Docs**: [Documentation](https://docs.poliq.com.br)
- ğŸ¦ **Twitter**: [@poliq_news](https://twitter.com/poliq_news)
- ğŸ’¼ **LinkedIn**: [Poliq News](https://linkedin.com/company/poliq-news)

## â­ Star History

[![Star History Chart](https://api.star-history.com/svg?repos=andrealvimc/poliq&type=Date)](https://star-history.com/#andrealvimc/poliq&Date)

---

**Made with â¤ï¸ by [AndrÃ© Alvim](https://github.com/andrealvimc)**

*Transformando notÃ­cias em conteÃºdo viral desde 2024* ğŸš€